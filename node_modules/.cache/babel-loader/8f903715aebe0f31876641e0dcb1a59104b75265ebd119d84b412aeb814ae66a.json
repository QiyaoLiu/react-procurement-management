{"ast":null,"code":"import axios from \"axios\";\nconst baseUrl = \"/api\";\nclass HttpRequest {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n  }\n  getInsideConfig() {\n    const config = {\n      baseUrl: this.baseUrl,\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    return config;\n  }\n  intercept(instance) {\n    // Add a request interceptor\n    instance.interceptors.request.use(config => {\n      // Add the token to headers before request is sent\n      const token = localStorage.getItem(\"token\");\n      if (token) {\n        config.headers[\"Authorization\"] = `Bearer ${token}`; // Set the token header\n      }\n      return config;\n    }, error => {\n      // Do something with request error\n      return Promise.reject(error);\n    });\n\n    // Add a response interceptor\n    instance.interceptors.response.use(function (response) {\n      // Any status code that lies within the range of 2xx causes this function to trigger\n      // Do something with response data\n      return response;\n    }, function (error) {\n      if (error.response.status === 401) {\n        localStorage.removeItem(\"token\");\n        window.location.href = \"/login\"; // Force redirection to login page\n      }\n      return Promise.reject(error);\n    });\n  }\n  request(options) {\n    options = {\n      ...this.getInsideConfig(),\n      ...options\n    };\n    const instance = axios.create();\n    this.intercept(instance);\n    return instance(options);\n  }\n}\nexport default new HttpRequest(baseUrl);","map":{"version":3,"names":["axios","baseUrl","HttpRequest","constructor","getInsideConfig","config","headers","Authorization","token","intercept","instance","interceptors","request","use","localStorage","getItem","error","Promise","reject","response","status","removeItem","window","location","href","options","create"],"sources":["/Users/liu/Library/CloudStorage/Dropbox/Projects/procurement-management/src/api/axios.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"/api\";\n\nclass HttpRequest {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n  }\n\n  getInsideConfig() {\n    const config = {\n      baseUrl: this.baseUrl,\n      headers: { Authorization: `Bearer ${token}` },\n    };\n    return config;\n  }\n\n  intercept(instance) {\n    // Add a request interceptor\n    instance.interceptors.request.use(\n      (config) => {\n        // Add the token to headers before request is sent\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n          config.headers[\"Authorization\"] = `Bearer ${token}`; // Set the token header\n        }\n        return config;\n      },\n      (error) => {\n        // Do something with request error\n        return Promise.reject(error);\n      }\n    );\n\n    // Add a response interceptor\n    instance.interceptors.response.use(\n      function (response) {\n        // Any status code that lies within the range of 2xx causes this function to trigger\n        // Do something with response data\n        return response;\n      },\n      function (error) {\n        if (error.response.status === 401) {\n          localStorage.removeItem(\"token\");\n          window.location.href = \"/login\"; // Force redirection to login page\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  request(options) {\n    options = { ...this.getInsideConfig(), ...options };\n    const instance = axios.create();\n\n    this.intercept(instance);\n\n    return instance(options);\n  }\n}\nexport default new HttpRequest(baseUrl);\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,MAAM;AAEtB,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAACF,OAAO,EAAE;IACnB,IAAI,CAACA,OAAO,GAAGA,OAAO;EACxB;EAEAG,eAAeA,CAAA,EAAG;IAChB,MAAMC,MAAM,GAAG;MACbJ,OAAO,EAAE,IAAI,CAACA,OAAO;MACrBK,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUC,KAAK;MAAG;IAC9C,CAAC;IACD,OAAOH,MAAM;EACf;EAEAI,SAASA,CAACC,QAAQ,EAAE;IAClB;IACAA,QAAQ,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BR,MAAM,IAAK;MACV;MACA,MAAMG,KAAK,GAAGM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAIP,KAAK,EAAE;QACTH,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUE,KAAK,EAAE,CAAC,CAAC;MACvD;MACA,OAAOH,MAAM;IACf,CAAC,EACAW,KAAK,IAAK;MACT;MACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAC9B,CACF,CAAC;;IAED;IACAN,QAAQ,CAACC,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAChC,UAAUM,QAAQ,EAAE;MAClB;MACA;MACA,OAAOA,QAAQ;IACjB,CAAC,EACD,UAAUH,KAAK,EAAE;MACf,IAAIA,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;QACjCN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;QAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,CAAC,CAAC;MACnC;MACA,OAAOP,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAC9B,CACF,CAAC;EACH;EAEAJ,OAAOA,CAACa,OAAO,EAAE;IACfA,OAAO,GAAG;MAAE,GAAG,IAAI,CAACrB,eAAe,CAAC,CAAC;MAAE,GAAGqB;IAAQ,CAAC;IACnD,MAAMf,QAAQ,GAAGV,KAAK,CAAC0B,MAAM,CAAC,CAAC;IAE/B,IAAI,CAACjB,SAAS,CAACC,QAAQ,CAAC;IAExB,OAAOA,QAAQ,CAACe,OAAO,CAAC;EAC1B;AACF;AACA,eAAe,IAAIvB,WAAW,CAACD,OAAO,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}